{
  "kind": "build_request",
  "title": "Add Approve Report button in Coordinator View and restore Activity fields/functionality",
  "projectName": "Museus Centro",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add an 'Approve Report' (Aprovar Relatório) button in the Coordinator view (ApprovalsPage and/or ApprovalDetailView) that allows coordinators to approve a submitted report. The button should trigger the existing approval mutation and be visible only to users with the coordination or administration role.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Adicione botao Aprovar Relatório na Visão Coordenador"
        ]
      },
      "acceptanceCriteria": [
        "An 'Approve Report' button is visible in the Coordinator view (ApprovalsPage/ApprovalDetailView) for submitted reports",
        "The button is only visible to users with coordinator or admin roles",
        "Clicking the button triggers the approval action and updates the report status accordingly",
        "The UI reflects the updated approval status after the action"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Restore all activity-related fields and functionality in the report pages. This includes: the 'Add Activity' (Nova Atividade / Adicionar Atividade) button on each report's detail/list view, the ActivitiesList component displaying activity cards with status badges, hours, and audience, and the ability to create/edit activities linked to a report via ActivityFormPage. Ensure activities are correctly fetched and displayed for each report.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "re insira os campos e funcioanlidade relacionada as atividades adicionadas"
        ]
      },
      "acceptanceCriteria": [
        "The 'Add Activity' button appears on each report detail/list view for editable reports",
        "The ActivitiesList component renders activity cards with all fields (status badge, hours, audience, classification, etc.)",
        "Clicking 'Add Activity' navigates to ActivityFormPage pre-linked to the correct report",
        "Activities saved for a report are fetched and displayed correctly under that report",
        "All activity form fields (classification, status, audience profiles, products, evidence, accessibility, quantitative goals) are present and functional"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Ensure the application loads and renders correctly without blank screen or crash on startup. Investigate and fix any runtime errors or missing imports that may have caused Version 21 to fail to open.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "a versao 21 nao abriu"
        ]
      },
      "acceptanceCriteria": [
        "The application loads successfully without a blank screen or unhandled runtime error",
        "All pages navigate correctly without crashing",
        "No console errors related to missing components or broken imports on initial load"
      ]
    }
  ],
  "constraints": [
    "Do not change the backend data schema or existing Motoko actor logic unless required to support the approval button action",
    "Do not modify files under frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or frontend/src/components/ui",
    "Approval button must respect existing role-based authorization (coordinator/admin only)"
  ],
  "nonGoals": [
    "Redesigning the overall UI layout or color theme",
    "Adding new backend endpoints beyond what is needed for report approval",
    "Changing the PDF or Excel export functionality"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}